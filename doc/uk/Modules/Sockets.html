<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html class="client-nojs" dir="ltr" lang="en">
<head>
<title>Модулі/Sockets - OpenSCADAWiki</title>
<meta content="MediaWiki 1.26.4" name="generator" />
<link href="https://www.gnu.org/copyleft/fdl.html" rel="copyright" />
<link href="../../en/files/doc.css" rel="stylesheet" /></head>
<body><div id="mw_header">
			<div class="mw-indicators">
</div>
			<h1 id="firstHeading" lang="uk">Модулі/Sockets</h1>
		</div><div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="uk"><div class="mw-pt-translate-header noprint" dir="ltr" lang="en">This page is a <span class="plainlinks"><a class="external text" href="http://oscada.org/wiki/index.php?title=Special:Translate&amp;group=page-Modules%2FSockets&amp;action=page&amp;filter=&amp;language=uk" rel="nofollow noreferrer noopener" target="_blank">translated version</a></span> of the page <a class="external" href="http://oscada.org/wiki/Modules/Sockets" title="Modules/Sockets">Modules/Sockets</a> and the translation is 100% complete.</div><hr /><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" href="http://oscada.org/wiki/Modules/Sockets" title="Modules/Sockets (100% translated)">English</a>&nbsp;• ‎<a class="mw-pt-progress mw-pt-progress--complete" href="http://oscada.org/wiki/Modules/Sockets/ru" title="Модули/Sockets (100% translated)">российский</a>&nbsp;• ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">українська</span></div></div>
<table class="wikitable">

<tr>
<th> Модуль </th>
<th> Ім'я </th>
<th> Версія </th>
<th> Ліцензія </th>
<th> Джерело </th>
<th> Мови </th>
<th> Платформи </th>
<th> Тип </th>
<th> Автор </th>
<th> Опис
</th></tr>

<tr>
<td> <a href="../Modules/Sockets.html" title="Special:MyLanguage/Modules/Sockets">Sockets</a> </td>
<td> Сокети
</td>
<td> 2.8 </td>
<td> GPL2 </td>
<td> tr_Sockets.so </td>
<td> en,uk,ru,de </td>
<td> x86,x86_64,ARM
</td>
<td> Транспорт </td>
<td> Роман Савоченко, Максим Кочетков </td>
<td> Надає транспорт заснований на сокетах. Підтримуються мережеві та UNIX сокети. Мережевий сокет підтримує TCP, UDP та RAWCAN протоколи.
</td></tr></table>
<div class="toc" id="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.92.D1.85.D1.96.D0.B4.D0.BD.D1.96_.D1.82.D1.80.D0.B0.D0.BD.D1.81.D0.BF.D0.BE.D1.80.D1.82.D0.B8"><span class="tocnumber">1</span> <span class="toctext">Вхідні транспорти</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.D0.92.D0.B8.D1.85.D1.96.D0.B4.D0.BD.D1.96_.D1.82.D1.80.D0.B0.D0.BD.D1.81.D0.BF.D0.BE.D1.80.D1.82.D0.B8"><span class="tocnumber">2</span> <span class="toctext">Вихідні транспорти</span></a></li>
</ul>
</div>

<p>Модуль надає до програми підтримку транспортів, заснованих на сокетах. Підтримуються вхідні та вихідні транспорти, основані на мережевих сокетах TCP, UDP та UNIX. Додати нові вхідні та вихідні сокети можна за посередництвом конфігурації транспортної підсистеми у будь якому конфігураторі OpenSCADA.
</p>
<h2><span class="mw-headline" id=".D0.92.D1.85.D1.96.D0.B4.D0.BD.D1.96_.D1.82.D1.80.D0.B0.D0.BD.D1.81.D0.BF.D0.BE.D1.80.D1.82.D0.B8"><span class="mw-headline-number">1</span> Вхідні транспорти</span></h2>
<p>Сконфігурований та запущений вхідний транспорт відкриває серверний сокет для очікування підключення клієнтів, крім ініціативного підключення. У випадку з UNIX сокетом створюється файл UNIX сокету. Сокети TCP та UNIX є багатопотоковими, тобто при підключені клієнту до сокетів цих типів створюється клієнтський сокет та новий потік, у якому відбувається обслуговування клієнту. Серверний сокет, на цей час, переходить до очікування запитів від нового клієнту. Таким чином досягається паралельне обслуговування клієнтів. RAWCAN сокет здійснює прийом CAN кадрів з інтерфейсу згідно до налаштованому фільтру.
</p><p>Кожний вхідний сокет пов'язується з одним з доступних транспортних протоколів, якому передаються вхідні повідомлення. Разом з транспортним протоколом підтримується механізм об'єднання шматків розрізнених при передачі запитів.
</p><p>Діалог конфігурації вхідного сокету зображено на рисунку 1.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:774px;"><a class="image" href="http://oscada.org/wiki/File:Sockets_in_uk.png"><img class="thumbimage" height="712" src="../files/Sockets_in_uk.png" width="772" /></a>  <div class="thumbcaption">Рис.1. Діалог конфігурації вхідного сокету.</div></div></div></div>
<p>За допомогою цього діалогу можна встановити:
</p>
<ul><li> Стан транспорту, а саме: статус, "Виконується", ім'я БД (яка містить конфігурацію) та інформація про поточні підключення.</li>
<li> Ідентифікатор, ім'я та опис транспорту.</li>
<li> Адреса транспорту. Формат адреси описано у таблиці нижче.</li>
<li> Обрання транспортного протоколу.</li></ul>
<dl><dd><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../../en/files/At.png" width="22" /></a> Порожнє значення обрання протоколу перемикає транспорт у режим створення асоційованого вихідного транспорту для кожного підключення на цей вхідний.</dd>
<dd>Режим асоційованих вихідних транспортів для вхідного передбачає наявність деякої зовнішньої до транспорту процедури, яка виконує роль протоколу, та яка має "обходити" всі асоційовані вихідні транспорти, та виконувати запит на читання або запис-читання.</dd>
<dd><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../../en/files/At.png" width="22" /></a> Відсутність такої процедури неминуче призведе до росту асоційованих вихідних транспортів через відсутність сутності, яка зупиняє транспорти із закритими підключеннями та можливістю наступного видалення зупинених вихідних транспортів цим вхідним.</dd></dl>
<ul><li> Стан "Виконується", у який переводити транспорт при запуску.</li>
<li> Довжина черги сокетів, максимальна кількість обслугованих клієнтів, максимальна кількість обслугованих клієнтів за хостами (для TCP) та розмір вхідного буферу.</li>
<li> Пріоритет задач транспорту.</li>
<li> Максимальний розмір сегмента (MSS), для обмеження розміру пакетів що відсилаються (сегментів TCP) на поганих каналах зв'язку. Встановити в 0 для зняття користувацького обмеження розміру.</li>
<li> Keep alive запитів — закриття підключення після визначеної кількості запитів. Нульове значення для вимкнення — не закривається ніколи.</li>
<li> Keep alive час очікування, в секундах — закриття підключення після відсутності запитів протягом визначеного часу. Нульове значення для вимкнення — не закривається ніколи. </li></ul>
<dl><dd><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../../en/files/At.png" width="22" /></a> Вимикати цю функцію не рекомендується оскільки властивість мереж TCP/IP не гарантує повідомлення серверу про відключення з'єднання, скажемо у випадку зникнення живлення на клієнті. У результаті чого можуть <span style="color: red">назавжди</span> залишатися відкритими клієнтські підключення, а при досягненні ліміту сервер припинить приймати нові!</dd></dl>
<p>Особливості формування адреси вхідних сокетів приведено у таблиці нижче:
</p>
<table class="wikitable">

<tr>
<th> Тип сокету </th>
<th> Адреса
</th></tr>
<tr>
<td> TCP </td>
<td>
<p><b>TCP:{адреса}:{порт}:{режим}</b><br />
де:
</p>
<ul><li> <i>адреса</i> — адреса, на якій відкривається сокет. Має бути однією з адрес хосту. Якщо нічого не вказано то сокет буде доступний на всіх інтерфейсах хосту. Допускається як символьне, так й IP представлення адреси.</li>
<li> <i>порт</i> — мережевий порт, на якому відкривається сокет. Можливе вказання символьного імені порту (відповідно до "/etc/services").</li>
<li> <i>режим</i> — режим роботи вхідного сокету:
<ul><li> <b>0</b> — примусово розривати з'єднання після сеансу прийом-відповідь.</li>
<li> <b>1</b> — не розривати з'єднання, тільки з урахуванням параметрів KeepAlive.</li>
<li> <b>2</b> — ініціативне підключення. Включає режим ініціативи підключення цього вхідного транспорту до віддаленого хосту (адреса замість локального) та перехід у режим очікування запитів від цього хосту. Значення "Keep alive час очікування" використовується як таймаут перепідключення даного транспорту за відсутності активності з метою відновлення можливо втраченого підключення.</li></ul></li></ul>
<p>Приклад: "<b>TCP::10001:1</b>" — TCP-сокет доступний на всіх інтерфейсах, відкритий на порту 10001 та з'єднання не розриває. 
</p>
</td></tr>
<tr>
<td> UDP </td>
<td>
<p><b>UDP:{адреса}:{порт}</b><br />
де:
</p>
<ul><li> <i>адреса</i> — теж що у TCP;</li>
<li> <i>порт</i> — теж що у TCP.</li></ul>
<p>Приклад: "<b>UDP:localhost:10001</b>" — UDP-сокет доступний тільки на інтерфейсі "localhost" та відкритий на порту 10001. 
</p>
</td></tr>
<tr>
<td> RAWCAN </td>
<td>
<p><b>RAWCAN:{інтерфейс}:{маска}:{ідентифікатор}</b><br />
де:
</p>
<ul><li> <i>інтерфейс</i> — ім'я CAN інтерфейсу;</li>
<li> <i>маска, ідентифікатор</i> — маска та ідентифікатор для фільтрації CAN кадрів.</li></ul>
<p>Приклад: "<b>RAWCAN:can0:0:0</b>" — приймати всі CAN кадри на інтерфейсі "can0".
</p>
</td></tr>
<tr>
<td> UNIX </td>
<td>
<p><b>UNIX:{ім'я}:{режим}</b><br />
де:
</p>
<ul><li> <i>ім'я</i> — ім'я файлу UNIX сокету;</li>
<li> <i>режим</i> — те саме, що у TCP.</li></ul>
<p>Приклад: "<b>UNIX:/tmp/oscada:1</b>" — UNIX-сокет доступний через файл "/tmp/oscada" та з'єднання не розриває. 
</p>
</td></tr></table>
<h2><span class="mw-headline" id=".D0.92.D0.B8.D1.85.D1.96.D0.B4.D0.BD.D1.96_.D1.82.D1.80.D0.B0.D0.BD.D1.81.D0.BF.D0.BE.D1.80.D1.82.D0.B8"><span class="mw-headline-number">2</span> Вихідні транспорти</span></h2>
<p>Сконфігурований та запущений вихідний транспорт відкриває з'єднання з вказаним сервером. При розриві з'єднання вихідний транспорт зупиняється. Для відновлення з'єднання транспорт треба знову запустити, що всі протоколи роблять автоматично.
</p><p>Головну вкладка сторінки конфігурації вихідного сокету зображено на рисунку 2.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:713px;"><a class="image" href="http://oscada.org/wiki/File:Sockets_out_uk.png"><img class="thumbimage" height="593" src="../files/Sockets_out_uk.png" width="711" /></a>  <div class="thumbcaption">Рис.2. Головна вкладка сторінки конфігурації вихідного сокету.</div></div></div></div>
<p>За допомогою цього діалогу можна встановити:
</p>
<ul><li> Стан транспорту, а саме: статус, "Виконується" та ім'я БД, яка містить конфігурацію.</li>
<li> Ідентифікатор, ім'я та опис транспорту.</li>
<li> Адреса транспорту. Формат адреси описано у таблиці нижче.</li>
<li> Стан "Виконується", у який переводити транспорт при запуску.</li>
<li> Максимальний розмір сегменту (MSS), для обмеження розміру пакетів що відправляються (сегментів TCP) на поганих каналах зв'язку. Встановити у 0 для зняття користувацького обмеження розміру.</li>
<li> Інтервали часу підключення у форматі: "<b>conn:next[:rep]</b>". Де:
<ul><li> <i>conn</i> — максимальний час очікування відповіді підключення, у секундах;</li>
<li> <i>next</i> — максимальний час очікування продовження відповіді, у секундах;</li>
<li> <i>rep</i>  — мінімальний час затримки наступного запиту, в секундах.</li></ul></li></ul>
<p>Адреса вихідних сокетів різного типу формуються наступним чином:
</p>
<table class="wikitable">

<tr>
<th> Тип сокету </th>
<th> Адреса
</th></tr>
<tr>
<td> TCP/UDP </td>
<td>
<p><b>TCP:{адреса}:{порт}</b><br />
<b>UDP:{адреса}:{порт}</b><br />
де:
</p>
<ul><li> <i>адреса</i> — адреса, з якою здійснюється підключення. Допускається як символьне, так й IP представлення адреси.</li>
<li> <i>порт</i> — мережевий порт, з яким здійснюється підключення. Можливе вказання символьного імені порту (відповідно до "/etc/services").</li></ul>
<p>Приклад: "<b>TCP:127.0.0.1:7634</b>" — підключення з портом 7634 на хості 127.0.0.1.
</p>
</td></tr>
<tr>
<td> RAWCAN </td>
<td>
<p><b>RAWCAN:{інтерфейс}:{маска}:{ідентифікатор}</b><br />
де:
</p>
<ul><li> <i>інтерфейс</i> — ім'я CAN інтерфейсу;</li>
<li> <i>маска, ідентифікатор</i> — маска та ідентифікатор CAN кадрів.</li></ul>
<p>Приклад: "<b>RAWCAN:can0:0:0</b>" — приймати всі CAN кадри на інтерфейсі "can0". 
</p>
</td></tr>
<tr>
<td> UNIX </td>
<td>
<p><b>UNIX:{ім'я}</b><br />
де:
</p>
<ul><li> <i>ім'я</i> — ім'я файлу UNIX сокета.</li></ul>
<p>Приклад: "<b>UNIX:/tmp/oscada</b>" — з'єднатися з UNIX-сокетом через файл "/tmp/oscada". 
</p>
</td></tr></table>






</div></body>
</html>