<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html class="client-nojs" dir="ltr" lang="en">
<head>
<title>Документы/Как сделать/Собрать из исходных текстов - OpenSCADAWiki</title>
<meta content="MediaWiki 1.26.4" name="generator" />
<link href="https://www.gnu.org/copyleft/fdl.html" rel="copyright" />
<link href="../en/files/doc.css" rel="stylesheet" /></head>
<body><div id="mw_header">
			<div class="mw-indicators">
</div>
			<h1 id="firstHeading" lang="ru">Документы/Как сделать/Собрать из исходных текстов</h1>
		</div><div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="ru"><div class="mw-pt-translate-header noprint" dir="ltr" lang="en">This page is a <span class="plainlinks"><a class="external text" href="http://oscada.org/wiki/index.php?title=Special:Translate&amp;group=page-Documents%2FHow+to%2FBuild+from+source&amp;action=page&amp;filter=&amp;language=ru" rel="nofollow noreferrer noopener" target="_blank">translated version</a></span> of the page <a class="external" href="http://oscada.org/wiki/Documents/How_to/Build_from_source" title="Documents/How to/Build from source">Documents/How to/Build from source</a> and the translation is 100% complete.</div><hr /><div class="mw-pt-languages noprint" dir="ltr" lang="en"><div class="mw-pt-languages-label">Other languages:</div><div class="mw-pt-languages-list autonym"><a class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" href="http://oscada.org/wiki/Documents/How_to/Build_from_source" title="Documents/How to/Build from source (100% translated)">English</a>&nbsp;• ‎<span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete">российский</span>&nbsp;• ‎<a class="mw-pt-progress mw-pt-progress--complete" href="http://oscada.org/wiki/Documents/How_to/Build_from_source/uk" title="Документи/Як зробити/Скласти з вихідних текстів (100% translated)">українська</a></div></div>
<div class="noprint" style="float:right; border:1px solid gray; width:300px; background-color:ivory; padding:2px;">
<table cellspacing="0">
<tr>
<td> <a class="image" href="http://oscada.org/wiki/File:Constr.png"><img alt="Constr.png" height="32" src="../en/files/Constr.png" width="32" /></a>
</td>
<td style="padding-left:5px;"> Generic revision and translation
</td></tr></table>
</div>
<p><i>Автор:</i> <a class="external" href="http://oscada.org/wiki/User:RomanSavochenko" title="User:RomanSavochenko">Роман Савоченко</a>, <a class="external text" href="http://oscada.org/en/forum/user/IrmIngeneer/" rel="nofollow noreferrer noopener" target="_blank">Константин</a>
</p>
<div class="toc" id="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.D0.9A.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D1.8F_OpenSCADA_.D0.B4.D0.BB.D1.8F_.D1.81.D0.B1.D0.BE.D1.80.D0.BA.D0.B8"><span class="tocnumber">1</span> <span class="toctext">Конфигурация OpenSCADA для сборки</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.D0.9F.D1.80.D1.8F.D0.BC.D0.B0.D1.8F_.D1.81.D0.B1.D0.BE.D1.80.D0.BA.D0.B0_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B_OpenSCADA"><span class="tocnumber">2</span> <span class="toctext">Прямая сборка системы OpenSCADA</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#.D0.A1.D0.B1.D0.BE.D1.80.D0.BA.D0.B0_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B_OpenSCADA_.D0.B4.D0.BB.D1.8F_.D0.B4.D0.B8.D1.81.D1.82.D1.80.D0.B8.D0.B1.D1.83.D1.82.D0.B8.D0.B2.D0.B0_Linux"><span class="tocnumber">3</span> <span class="toctext">Сборка пакетов системы OpenSCADA для дистрибутива Linux</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Redhat-based_.D0.B4.D0.B8.D1.81.D1.82.D1.80.D0.B8.D0.B1.D1.83.D1.82.D0.B8.D0.B2.D1.8B_-_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82_RPM"><span class="tocnumber">3.1</span> <span class="toctext">Redhat-based дистрибутивы - пакет RPM</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Debian-based_.D0.B4.D0.B8.D1.81.D1.82.D1.80.D0.B8.D0.B1.D1.83.D1.82.D0.B8.D0.B2.D1.8B_-_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82_Deb"><span class="tocnumber">3.2</span> <span class="toctext">Debian-based дистрибутивы - пакет Deb</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Gentoo_-_.D0.BC.D0.B5.D1.82.D0.B0.D0.B4.D0.B8.D1.81.D1.82.D1.80.D0.B8.D0.B1.D1.83.D1.82.D0.B8.D0.B2"><span class="tocnumber">3.3</span> <span class="toctext">Gentoo - метадистрибутив</span></a></li>
</ul>
</li>
</ul>
</div>

<p>Данное руководство призвано помочь в сборке системы OpenSCADA из исходных текстов. По мере накопления опыта сборки на различных дистрибутивах ОС Linux и на других платформах вообще документ будет дополняться особенностями и деталями сборки в различных окружениях.
</p><p>Документ также содержит информацию о предварительной настройке собранной системы OpenSCADA для полноценного пуска с использованием поставляемой с исходным текстом демонстрационной БД (модель "АГЛКС").
</p><p><a class="image" href="http://oscada.org/wiki/File:At.png"><img alt="At.png" height="22" src="../en/files/At.png" width="22" /></a> Для сборки OpenSCADA из исходных текстов требуется опыт сборки свободного ПО, а также базовые знания в ОС Linux и используемого дистрибутива Linux, что позволит корректно удовлетворять зависимости и решать возможные проблемы сборки.
</p>
<h2><span class="mw-headline" id=".D0.9A.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D1.8F_OpenSCADA_.D0.B4.D0.BB.D1.8F_.D1.81.D0.B1.D0.BE.D1.80.D0.BA.D0.B8"><span class="mw-headline-number">1</span> Конфигурация OpenSCADA для сборки</span></h2>
<p>Проектом OpenSCADA, в качестве сборочной системы, используется набор утилит <a class="external text" href="http://ru.wikipedia.org/wiki/Autotools" rel="nofollow noreferrer noopener" target="_blank">AutoTools</a>. Любой сборке проекта под управлением "AutoTools" предшествует стадия конфигурации, а иногда и формирования сборочной системы под окружение ОС. Стадия конфигурации, как и непосредственно сборка, осуществляется всегда и не зависит от того производится это прямая сборка или сборка пакета.
</p><p>Для формирования сборочной системы должны быть установлены утилиты "AutoTools": "autoconf", "automake" и "libtool". Общее формирование можно произвести командой "<b>$ autoreconf -if</b>". Ранее сформированную сборочную систему иногда может потребоваться переформировать, например, в случае значительного различия окружения ОС на которой сборочная система формировалась и текущей. Переформирование сборочной системы осуществляется ранее указанной командой формирования.
</p><p>Конфигурация сборочной системы осуществляется вызовом команды "<b>$ configure</b>". Посредством указания аргументов к этой команде можно включить/выключить функцию или модуль OpenSCADA при сборке. Получить весь список доступных параметров конфигурации и модулей OpenSCADA можно указав аргумент <b>--help</b>.
</p><p>Включение и выключение модулей OpenSCADA осуществляется передачей аргументов <b>--enable-{ModName}</b> и <b>--disable-{ModName}</b>. Для выбора модулей можно указать политику "Включить все модули" <b>--enable-AllModuls</b> или "Выключить все модули" <b>--disable-AllModuls</b>, а далее включать/выключать отдельные модули, в зависимости от того что будет проще. Большинство модулей OpenSCADA можно влинковывать (встраивать) прямо в библиотеку ядра OpenSCADA, а не собирать отдельной библиотекой, для чего нужно указать аргумент <b>--enable-{ModName}=incl</b>.
</p><p>По окончанию конфигурации будет сформирован сводный результат настроек, с помощью которого можно проверить желаемую конфигурацию.
</p>
<h2><span class="mw-headline" id=".D0.9F.D1.80.D1.8F.D0.BC.D0.B0.D1.8F_.D1.81.D0.B1.D0.BE.D1.80.D0.BA.D0.B0_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B_OpenSCADA"><span class="mw-headline-number">2</span> Прямая сборка системы OpenSCADA</span></h2>
<p>Сборка должна производится от имени обычного пользователя. При этом будут рассмотрены варианты установки и исполнения как глобально в систему, так и локально, в директории пользователя. Принимаем логин пользователя — "user".
</p><p>Перед сборкой входим как обычный пользователь и подменяем login "user" на Ваш, определяемся с источником исходных текстов (ftp/http-сервер или SVN-репозиторий), способом установки (глобальный или локальный) и следуем инструкции:
</p><p>Этапы подготовки дерева исходных текстов к сборке:
</p>
<dl><dd>1. Создание директории для сборки проекта:
<dl><dd>$ mkdir ~/projects; cd ~/projects</dd></dl></dd>
<dd>2. Загрузка пакета с исходными текстами. Может быть произведена двумя способами:
<ul><li> загрузка тарбола исходных текстов и ресурсов с ftp-сервера проекта <a class="external free" href="ftp://ftp.oscada.org/OpenSCADA" rel="nofollow noreferrer noopener" target="_blank">ftp://ftp.oscada.org/OpenSCADA</a> и распаковка, например так: </li></ul>
<dl><dd>$ wget <a class="external free" href="ftp://ftp.oscada.org/OpenSCADA/0.8.0/openscada-0.8.0.tar.lzma" rel="nofollow noreferrer noopener" target="_blank">ftp://ftp.oscada.org/OpenSCADA/0.8.0/openscada-0.8.0.tar.lzma</a></dd>
<dd>$ wget <a class="external free" href="ftp://ftp.oscada.org/OpenSCADA/0.8.0/openscada-res-0.8.0.tar.lzma" rel="nofollow noreferrer noopener" target="_blank">ftp://ftp.oscada.org/OpenSCADA/0.8.0/openscada-res-0.8.0.tar.lzma</a></dd>
<dd>$ tar --lzma -xvf openscada-0.8.0.tar.lzma</dd>
<dd>$ cd openscada-0.8.0</dd>
<dd>$ tar --lzma -xvf ../openscada-res-0.8.0.tar.lzma</dd></dl>
<ul><li> получение дерева исходных текстов из SVN-репозитория проекта:</li></ul>
<dl><dd>$ svn co <a class="external free" href="svn://oscada.org/trunk/OpenSCADA" rel="nofollow noreferrer noopener" target="_blank">svn://oscada.org/trunk/OpenSCADA</a></dd>
<dd>$ cd OpenSCADA</dd></dl></dd>
<dd>3. Удовлетворение зависимостей проекта OpenSCADA для сборки в соответствии с <a class="external" href="http://oscada.org/wiki/Special:MyLanguage/Functions_and_demands#Building" title="Special:MyLanguage/Functions and demands">требованиями</a>.</dd>
<dd>4. Генерация сборочной системы, при загрузке из SVN-репозитория:
<dl><dd>$ autoreconf -if</dd></dl></dd></dl>
<p>Этапы глобальной сборки:
</p>
<dl><dd>1. Конфигурация сборочный системы OpenSCADA:
<dl><dd>$ ./configure</dd></dl></dd>
<dd>2. Сборка проекта OpenSCADA:
<dl><dd>$ make</dd></dl></dd>
<dd>3. Установка OpenSCADA:
<dl><dd>$ su; make install</dd></dl></dd>
<dd>4. Установка ряда файлов конфигурации и данных. Пропускаем для версий OpenSCADA &gt;= 0.8.1!
<ul><li> Копирование скрипта запуска и конфигурационного файла демонстрации:</li></ul>
<dl><dd>$ cp data/ModelsDB/AGLKS/openscada_demo /usr/bin</dd>
<dd>$ cp data/ModelsDB/AGLKS/oscada_AGLKS.xml /etc</dd></dl>
<ul><li> Формирование директории с данными и заполнение её:</li></ul>
<dl><dd>$ mkdir /var/spool/openscada</dd>
<dd>$ mkdir /var/spool/openscada/{DATA,icons,LibsDB,AGLKS}</dd>
<dd>$ cp data/LibsDB/*.db /var/spool/openscada/LibsDB</dd>
<dd>$ cp data/ModelsDB/AGLKS/*.db /var/spool/openscada/AGLKS</dd>
<dd>$ cp data/icons/* /var/spool/openscada/icons</dd>
<dd>$ install -m 777 -d /var/spool/openscada/ARCHIVES/{MESS,VAL}</dd></dl></dd>
<dd>5. Система готова к запуску:
<dl><dd>$ exit; openscada_demo</dd></dl></dd></dl>
<p>Этапы локальной сборки:
</p>
<dl><dd>1. Конфигурация сборочный системы OpenSCADA:
<dl><dd>$ mkdir ~/OScadaW; ./configure --prefix=/home/user/OScadaW</dd></dl></dd>
<dd>2. Сборка проекта OpenSCADA:
<dl><dd>$ make</dd></dl></dd>
<dd>3. Установка OpenSCADA:
<dl><dd>$ make install</dd></dl></dd>
<dd>4. Установка ряда файлов конфигурации и данных. Пропускаем для версий OpenSCADA &gt;= 0.8.1!
<ul><li> Копирование скрипта запуска и конфигурационного файла демонстрации:</li></ul>
<dl><dd>$ cp data/ModelsDB/AGLKS/openscada_demo_local ~/OScadaW/bin/openscada_demo</dd>
<dd>$ mkdir ~/OScadaW/etc</dd>
<dd>$ cp data/ModelsDB/AGLKS/oscada_demo_local.xml ~/OScadaW/etc/oscada_demo.xml</dd></dl>
<ul><li> Формирование директории с данными и заполнение её:</li></ul>
<dl><dd>$ mkdir ~/OScadaW/share/openscada</dd>
<dd>$ mkdir ~/OScadaW/share/openscada/{DATA,icons,LibsDB,AGLKS}</dd>
<dd>$ cp data/LibsDB/*.db ~/OScadaW/share/openscada/LibsDB</dd>
<dd>$ cp data/ModelsDB/AGLKS/*.db ~/OScadaW/share/openscada/AGLKS</dd>
<dd>$ cp data/icons/* ~/OScadaW/share/openscada/icons</dd>
<dd>$ install -m 777 -d ~/OScadaW/share/openscada/ARCHIVES/{MESS,VAL}</dd></dl></dd>
<dd>5. Система готова к запуску:
<dl><dd>$ cd ~/OScadaW/bin; ./openscada_demo</dd></dl></dd></dl>
<h2><span class="mw-headline" id=".D0.A1.D0.B1.D0.BE.D1.80.D0.BA.D0.B0_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82.D0.BE.D0.B2_.D1.81.D0.B8.D1.81.D1.82.D0.B5.D0.BC.D1.8B_OpenSCADA_.D0.B4.D0.BB.D1.8F_.D0.B4.D0.B8.D1.81.D1.82.D1.80.D0.B8.D0.B1.D1.83.D1.82.D0.B8.D0.B2.D0.B0_Linux"><span class="mw-headline-number">3</span> Сборка пакетов системы OpenSCADA для дистрибутива Linux</span></h2>
<h3><span class="mw-headline" id="Redhat-based_.D0.B4.D0.B8.D1.81.D1.82.D1.80.D0.B8.D0.B1.D1.83.D1.82.D0.B8.D0.B2.D1.8B_-_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82_RPM"><span class="mw-headline-number">3.1</span> Redhat-based дистрибутивы - пакет RPM</span></h3>
<p>Для сборки RPM-пакетов OpenSCADA Вам понадобятся архивы исходных текстов, ресурсов и файл спецификации RPM пакета (openscada.spec, openscada_mod.spec) или же SRPM-пакет всех этих исходных материалов (openscada-0.8.0-1.src.rpm), которые можно загрузить с <a class="external text" href="ftp://ftp.oscada.org" rel="nofollow noreferrer noopener" target="_blank">ftp</a> или <a class="external text" href="http://ftp.oscada.org" rel="nofollow noreferrer noopener" target="_blank">http</a>-сервера проекта.
</p><p>Файл спецификации RPM-пакетов и SRPM-пакет могут отличаться для разных дистрибутивов Linux, учитывая их особенности, поэтому нужно стараться загружать их в соответствии с дистрибутивом. Если специальный SRPM пакет отсутствует, то можно попробовать собрать из унифицированного файла спецификации в основном SRPM пакете.
</p><p>Сборка RPM-пакетов производится в директории со специальной структурой, которая обычно создаётся при установке соответствующего пакета дистрибутива (например: rpm-build). Эта директория в зависимости от дистрибутива располагается в домашней директории пользователя или в директории <b>/usr/src</b>. Известные факты расположения директории сборки RPM-пакетов различных дистрибутивов:
</p>
<ul><li> <b>/usr/src/packages</b>&nbsp;: <a class="external text" href="http://open-suse.ru" rel="nofollow noreferrer noopener" target="_blank">Open-SUSE</a></li>
<li> <b>~/RPM</b>&nbsp;: <a class="external text" href="http://altlinux.ru" rel="nofollow noreferrer noopener" target="_blank">ALTLinux</a></li>
<li> <b>~/rpmbuild</b>&nbsp;: <a class="external text" href="http://mandriva.ru" rel="nofollow noreferrer noopener" target="_blank">Mandriva</a>, <a class="external text" href="http://fedoraproject.org/ru" rel="nofollow noreferrer noopener" target="_blank">Fedora и ответвления</a></li></ul>
<p>Если после установки специализированного пакета директории создания RPM пакетов нет, то её нужно создать командой:
</p>
<dl><dd>$ install -m 755 -d <u>Директория дистрибутива</u>/{SPECS,SOURCES}</dd></dl>
<p>Этапы сборки по файлу спецификации RPM:
</p>
<dl><dd>1. Размещение архивов OpenSCADA и файла спецификации в директории сборки RPM (исходные файлы предварительно помещены в текущей директории):
<dl><dd>$ cp openscada-0.8.0.tar.lzma openscada-res-0.8.0.tar.lzma <u>Директория дистрибутива</u>/SOURCES</dd>
<dd>$ cp openscada.spec <u>Директория дистрибутива</u>/SPECS</dd></dl></dd>
<dd>2. Удовлетворение зависимостей проекта OpenSCADA для сборки в соответствии с <a class="external" href="http://oscada.org/wiki/Special:MyLanguage/Functions_and_demands#Building" title="Special:MyLanguage/Functions and demands">требованиями</a>. Аргументы команды "configure" можно указать в файле "openscada.spec".</dd>
<dd>3. Сборка пакетов
<ul><li> сборка сначала:</li></ul>
<dl><dd>$ rpmbuild -bb <u>Директория дистрибутива</u>/SPECS/openscada.spec</dd></dl>
<ul><li> только установка и упаковка из пакета rpm-утилит etersoft (удобно при настройке openscada.spec файла):</li></ul>
<dl><dd>$ rpmbb -i <u>Директория дистрибутива</u>/SPECS/openscada.spec</dd></dl></dd>
<dd>4. Пакеты готовы и доступны в директории <b><u>Директория дистрибутива</u>/RPMS</b>  для соответствующей архитектуры.</dd></dl>
<p>Этапы сборки из SRPMS пакета:
</p>
<dl><dd>1. Удовлетворение зависимостей проекта OpenSCADA для сборки в соответствии с <a class="external" href="http://oscada.org/wiki/Special:MyLanguage/Functions_and_demands#Building" title="Special:MyLanguage/Functions and demands">требованиями</a>.</dd>
<dd>2. Сборка пакетов (исходные файлы предварительно помещены в текущей директории):
<dl><dd>$ rpmbuild --rebuild openscada-0.8.0-1.src.rpm</dd></dl></dd>
<dd>3. Пакеты готовы и доступны в директории <b><u>Директория дистрибутива</u>/RPMS</b>  для соответствующей архитектуры.</dd></dl>
<h3><span class="mw-headline" id="Debian-based_.D0.B4.D0.B8.D1.81.D1.82.D1.80.D0.B8.D0.B1.D1.83.D1.82.D0.B8.D0.B2.D1.8B_-_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82_Deb"><span class="mw-headline-number">3.2</span> Debian-based дистрибутивы - пакет Deb</span></h3>
<p>Для сборки Deb-пакетов OpenSCADA Вам понадобятся архивы исходных текстов и ресурсов, которые можно загрузить с <a class="external text" href="ftp://ftp.oscada.org" rel="nofollow noreferrer noopener" target="_blank">ftp</a> или <a class="external text" href="http://ftp.oscada.org" rel="nofollow noreferrer noopener" target="_blank">http</a>-сервера проекта.
</p><p>Сборка Deb-пакетов производится в директории "debian" со скриптами сборки, которая содержится в архивах исходных текстов OpenSCADA.
</p><p>Этапы сборки:
</p>
<dl><dd>1. Создание директории для сборки проекта:
<dl><dd>$ mkdir ~/build; cd ~/build</dd></dl></dd>
<dd>2. Загрузка пакета с исходными текстами. Загрузка тарбола исходных текстов и ресурсов с ftp-сервера проекта <a class="external free" href="ftp://ftp.oscada.org/OpenSCADA" rel="nofollow noreferrer noopener" target="_blank">ftp://ftp.oscada.org/OpenSCADA</a> и распаковка, например так: 
<dl><dd>$ wget <a class="external free" href="ftp://ftp.oscada.org/OpenSCADA/0.8.0/openscada-0.8.0.tar.lzma" rel="nofollow noreferrer noopener" target="_blank">ftp://ftp.oscada.org/OpenSCADA/0.8.0/openscada-0.8.0.tar.lzma</a></dd>
<dd>$ wget <a class="external free" href="ftp://ftp.oscada.org/OpenSCADA/0.8.0/openscada-res-0.8.0.tar.lzma" rel="nofollow noreferrer noopener" target="_blank">ftp://ftp.oscada.org/OpenSCADA/0.8.0/openscada-res-0.8.0.tar.lzma</a></dd>
<dd>$ tar --lzma -xvf openscada-0.8.0.tar.lzma</dd>
<dd>$ cd openscada-0.8.0</dd>
<dd>$ tar --lzma -xvf ../openscada-res-0.8.0.tar.lzma</dd></dl></dd>
<dd>3. Выбор типа сборки:
<ul><li> бинарные файлы в одном пакете:</li></ul>
<dl><dd>$ ln -s openscada-0.8.0/data/debian openscada-0.8.0/debian</dd></dl>
<ul><li> бинарные файлы модулей в отдельных пакетах:</li></ul>
<dl><dd>$ ln -s openscada-0.8.0/data/debian_mod openscada-0.8.0/debian</dd></dl></dd>
<dd>4. Удовлетворение зависимостей проекта OpenSCADA для сборки в соответствии с <a class="external" href="http://oscada.org/wiki/Special:MyLanguage/Functions_and_demands#Building" title="Special:MyLanguage/Functions and demands">требованиями</a>. Аргументы команды "configure" можно указать в файле <b>openscada-0.8.0/debian/rules</b>.</dd>
<dd>5. Переход в директорию OpenSCADA и запуск сборки:
<dl><dd>$ cd openscada-0.8.0</dd></dl>
<ul><li> сборка сначала:</li></ul>
<dl><dd>$ dpkg-buildpackage -rfakeroot</dd></dl>
<ul><li> пропустить сборку и переупаковать, удобно при отладке <b>openscada-0.8.0/debian/rules</b>:</li></ul>
<dl><dd>$ fakeroot debian/rules binary</dd>
<dd>$ fakeroot debian/rules build</dd></dl></dd>
<dd>6. Пакеты готовы и доступны в директории уровнем выше.</dd></dl>
<h3><span class="mw-headline" id="Gentoo_-_.D0.BC.D0.B5.D1.82.D0.B0.D0.B4.D0.B8.D1.81.D1.82.D1.80.D0.B8.D0.B1.D1.83.D1.82.D0.B8.D0.B2"><span class="mw-headline-number">3.3</span> Gentoo - метадистрибутив</span></h3>
<p>OpenSCADA не входит в официальное дерево portage Gentoo, поэтому сборка производится из оверлея. Подробно про работу с оверлеем можно найти на сайтах документации Gentoo, например: <a class="external free" href="http://ru.gentoo-wiki.com/wiki/Portage_Overlay" rel="nofollow noreferrer noopener" target="_blank">http://ru.gentoo-wiki.com/wiki/Portage_Overlay</a>. Перед сборкой самого пакета OpenSCADA portage удовлетворит зависимости, т.е. соберет недостающие пакеты (если необходимо).
</p>
<dl><dd>1. Создание оверлея portage сводится к описанию пути для оверлейного дерева, т.е. в <b>/etc/make.conf</b> необходимо прописать строку:
<dl><dd><i>PORTDIR_OVERLAY="/usr/local/portage"</i></dd></dl></dd>
<dd>2. Создать каталог <b>/usr/local/portage/dev-util/openscada/</b>, затем скачать файл архива ebuild c официального сайта и распаковать его в созданном каталоге.
<dl><dd>$ cd /usr/local/portage/dev-util/openscada</dd>
<dd>$ wget <a class="external free" href="ftp://ftp.oscada.org/OpenSCADA/0.8.0/Gentoo/openscada-0.8.0.ebuild.tar.gz" rel="nofollow noreferrer noopener" target="_blank">ftp://ftp.oscada.org/OpenSCADA/0.8.0/Gentoo/openscada-0.8.0.ebuild.tar.gz</a></dd>
<dd>$ tar -xzf openscada-0.8.0.ebuild.tar.gz</dd></dl></dd>
<dd>3. Необходимо указать portage, что OpenSCADA разрешена для сборки на Вашей платформе. Для этого надо внести следующую строку в файл <b>/etc/portage/package.keywords</b>:
<dl><dd><i>dev-util/openscada</i></dd></dl></dd>
<dd>4. Проверка:</dd></dl>
<pre style="white-space: pre-wrap; margin-left: 30px">
$ emerge -vp openscada
These are the packages that would be merged, in order:
Calculating dependencies... done!
[ebuild   R   ~] dev-util/openscada-0.8.0  USE="mysql ssl -bfn -blockcalc -daqgate -dbarch -dbase -dcon -demo -diamondboards -doc (-firebird) -flibcomplex1 -flibmath -flibsys -fsarch -http -icp_das -javalikecalc -logiclev -modbus -portaudio -qtcfg -qtstarter -selfsystem -serial -simens -snmp -sockets -sqlite -system -systemtest -vcaengine -vision -webcfg -webcfgd -webvision" 79,647 kB [1]

Total: 1 package (1 reinstall), Size of downloads: 79,647 kB
Portage tree and overlays:
 [0] /usr/portage
 [1] /usr/local/portage</pre>
<dl><dd>5. Если у Ваc нет подключения к интернету, то надо загрузить тарбол исходных текстов и ресурсов с ftp-сервера проекта и расположить их заранее в каталоге исходников portage (<b>/usr/portage/distfiles</b>). Если же у Вас есть подключение к интернету, то все необходимое для сборки будет взято с сервера проекта автоматически.</dd>
<dd>6. Необходимо выставить нужные Вам USE-флаги, с которыми будет собрана OpenSCADA. Это можно сделать в файле <b>/etc/portage/package.use</b>, например:
<dl><dd><i>dev-util/openscada dcon demo http javalikecalc mysql qtcfg qtstarter ssl vision webcfg webcfgd webvision blockcalc dbarch dbase doc flibcomplex1 flibmath flibsys fsarch logiclev modbus serial sockets sqlite vcaengine</i></dd></dl></dd>
<dd>7. Непосредственно сборка:
<dl><dd>$ emerge -q openscada</dd></dl></dd>
<dd>8. Файлы БД и ресурсов OpenSCADA готовы и будут размещены в каталоге <b>/var/spool/openscada/</b>, исполняемые файлы - <b>/usr/bin/</b>, документация - <b>/usr/share/doc/openscada-0.8.0/</b>.</dd></dl>






</div></body>
</html>