<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><title>OpenSCADAWiki : Doc/FLibComplex1</title>



  
<meta name="robots" content="noindex, nofollow">
  <meta http-equiv="content-type" content="text/html; charset=windows-1251">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <link rel="stylesheet" type="text/css" href="about_ru_files/wakkaprint.css"></head><body>

<div class="header">
	<h1>
  OpenSCADAWiki : <a href="http://diyaorg.dp.ua/oscadawiki/wakka.php?wakka=TextSearch?phrase=Doc%2FFLibComplex1">Doc/FLibComplex1</a> 
	</h1>
</div>

<div class="pageBefore"><img src="about_ru_files/z.gif" alt="" style="display: block;" align="top" border="0" height="1" width="1"></div><div class="page">
<a name="h91-1"></a><h1>Модуль подсистемы “Специальные” &lt;FLibComplex1&gt;</h1>
<table class="usertable" border="1">
<tbody><tr class="userrow"><td class="usercell"><em>Модуль:</em></td><td class="usercell">FLibComplex1</td></tr>
<tr class="userrow"><td class="usercell"><em>Имя:</em></td><td class="usercell">Библиотека функций совместимости со&nbsp;SCADA Complex1.</td></tr>
<tr class="userrow"><td class="usercell"><em>Тип:</em></td><td class="usercell">Специальные</td></tr>
<tr class="userrow"><td class="usercell"><em>Источник:</em></td><td class="usercell">spec_FLibComplex1.so</td></tr>
<tr class="userrow"><td class="usercell"><em>Версия:</em></td><td class="usercell">0.9.0</td></tr>
<tr class="userrow"><td class="usercell"><em>Автор:</em></td><td class="usercell">Роман Савоченко</td></tr>
<tr class="userrow"><td class="usercell"><em>Описание:</em></td><td class="usercell">Предоставляет библиотеку функций совместимости со&nbsp;SCADA Complex1 фирмы НИП&nbsp;“DIYA”.</td></tr>
<tr class="userrow"><td class="usercell"><em>Лицензия:</em></td><td class="usercell">GPL</td></tr>
</tbody></table>
<br>
<!--notypo--><fieldset><legend><strong> Оглавление документа   </strong></legend><div class="toc1"><a href="#h91-2">Введение</a></div><div class="toc1"><a href="#h91-3">1 Сигнал (alarm) &lt;111&gt;</a></div><div class="toc1"><a href="#h91-4">2 Условие '&lt;' (cond_lt) &lt;239&gt;</a></div><div class="toc1"><a href="#h91-5">3 Условие '&gt;' (cond_gt) &lt;240&gt;</a></div><div class="toc1"><a href="#h91-6">4 Полное условие (cond_full) &lt;513&gt;</a></div><div class="toc1"><a href="#h91-7">5 Дискретный блок (digitBlock) &lt;252&gt;</a></div><div class="toc1"><a href="#h91-8">6 Деление (div) &lt;526&gt;</a></div><div class="toc1"><a href="#h91-9">7 Экспонента (exp) &lt;476&gt;</a></div><div class="toc1"><a href="#h91-10">8 Расход (flow) &lt;235&gt;</a></div><div class="toc1"><a href="#h91-11">9 Итератор (increment) &lt;181&gt;</a></div><div class="toc1"><a href="#h91-12">10 Задержка (lag) &lt;121&gt;</a></div><div class="toc1"><a href="#h91-13">11 Простое умножение(mult) &lt;259&gt;</a></div><div class="toc1"><a href="#h91-14">12 Умножение+деление(multDiv) &lt;468&gt;</a></div><div class="toc1"><a href="#h91-15">13 ПИД&nbsp;регулятор (pid) &lt;745&gt;</a></div><div class="toc1"><a href="#h91-16">14 Степень (pow) &lt;564&gt;</a></div><div class="toc1"><a href="#h91-17">15 Выбор (select) &lt;156&gt;</a></div><div class="toc1"><a href="#h91-18">16 Простой сумматор (sum) &lt;404&gt;</a></div><div class="toc1"><a href="#h91-19">17 Сумма с&nbsp;делением (sum_div) &lt;518&gt;</a></div><div class="toc1"><a href="#h91-20">18 Сумма с&nbsp;умножением (sum_mult) &lt;483&gt;</a></div></fieldset><!--/notypo--><br>
<a name="h91-2"></a><h2>Введение</h2>
Специальный модуль FLibComplex1 предоставляет в&nbsp;систему OpenSCADA
статическую библиотеку функций совместимости со&nbsp;SCADA Complex1
фирмы НИП&nbsp;“DIYA”. Эти&nbsp;функции использовались в&nbsp;SCADA
системе Complex1 в&nbsp;виде алгоблоков для&nbsp;создания
внутрисистемных вычислений на&nbsp;основе виртуального контроллера.
Предоставление библиотеки этих функций позволяет выполнять перенос
вычислительных алгоритмов из&nbsp;системы Complex1.<br>
<br>
Для&nbsp;адресации к&nbsp;функциям этой библиотеки необходимо
использовать путь: &lt;Special.FLibComplex1.*&gt;. Где&nbsp;'*'
идентификатор функции в&nbsp;библиотеке.<br>
<br>
Ниже приведено описание каждой функции библиотеки. Для&nbsp;каждой
функции производилась оценка времени исполнения. Измерение
производилось на&nbsp;системе со&nbsp;следующими параметрами: Athlon 64
3000+ (ALTLinux 3.0(32бит)) путём замера общего времени исполнения
функции при&nbsp;вызове её 1000 раз. Выборка производилась
по&nbsp;наименьшему значению из&nbsp;пяти вычислений. Время заключается
в&nbsp;угловые скобки и&nbsp;измеряется в&nbsp;микросекундах. <br>
<a name="h91-3"></a><h2>1 Сигнал (alarm) &lt;111&gt;</h2>
<em>Описание:</em> Установка признака сигнализации в&nbsp;случае выхода значения переменной за&nbsp;указанную границу.<br>
<em>Формула:</em> <br>
<!--notypo--><div class="code"><code><font color="#000000">
out = if(val&gt;max || val&lt;min) then true; else false;</font>
</code></div><!--/notypo--><br>
<a name="h91-4"></a><h2>2 Условие '&lt;' (cond_lt) &lt;239&gt;</h2>
<em>Описание:</em> Операция ветвления в&nbsp;соответствии с&nbsp;условием “&lt;".<br>
<em>Формула:</em> <br>
<!--notypo--><div class="code"><code><font color="#000000">
out=if(in1&lt;(in2_1*in2_2*in2_3*in2_4)) <br>then in3_1*in3_2*in3_3*in3_4;<br>else in4_1*in4_2*in4_3*in4_4;</font>
</code></div><!--/notypo--><br>
<a name="h91-5"></a><h2>3 Условие '&gt;' (cond_gt) &lt;240&gt;</h2>
<em>Описание:</em> Операция ветвления в&nbsp;соответствии с&nbsp;условием “&gt;".<br>
<em>Формула:</em><br>
<!--notypo--><div class="code"><code><font color="#000000">
out=if(in1&gt;(in2_1*in2_2*in2_3*in2_4)) <br>then in3_1*in3_2*in3_3*in3_4;<br>else in4_1*in4_2*in4_3*in4_4;</font>
</code></div><!--/notypo--><br>
<a name="h91-6"></a><h2>4 Полное условие (cond_full) &lt;513&gt;</h2>
<em>Описание:</em> Полная проверка условия, включая: больше, меньше и&nbsp;равно.<br>
<em>Формула:</em><br>
<!--notypo--><div class="code"><code><font color="#000000">
out = if(in1&lt;(in2_1*in2_2*in2_3*in2_4))<br>then in3_1*in3_2*in3_3*in3_4;<br>else if( in1&gt;(in4_1*in4_2*in4_3*in4_4) <br>&nbsp;&nbsp;then in5_1*in5_2*in5_3*in5_4;<br>&nbsp;&nbsp;else in6_1*in6_2*in6_3*in6_4;</font>
</code></div><!--/notypo--><br>
<a name="h91-7"></a><h2>5 Дискретный блок (digitBlock) &lt;252&gt;</h2>
<em>Описание:</em> Функция содержит алгоритм управления сборками
дискретных сигналов для&nbsp;задвижек и&nbsp;насосов содержащих:
признаки “Open”, “Close” и&nbsp;команды “Open”, “Close”, “Stop”.
Функция поддерживает работу с&nbsp;импульсными командами, т.е. может
снимать сигнал через указанный промежуток времени.<br>
<em>Параметры:</em><br>
<table class="usertable" border="1">
<tbody><tr class="userrow"><td class="usercell"><strong>ID</strong></td><td class="usercell"><strong>Параметр</strong></td><td class="usercell"><strong>Тип</strong></td><td class="usercell"><strong>Режим</strong></td></tr>
<tr class="userrow"><td class="usercell">cmdOpen</td><td class="usercell">Команда «Открыть»</td><td class="usercell">Bool</td><td class="usercell">Выход</td></tr>
<tr class="userrow"><td class="usercell">cmdClose</td><td class="usercell">Команда «Закрыть»</td><td class="usercell">Bool</td><td class="usercell">Выход</td></tr>
<tr class="userrow"><td class="usercell">cmdStop</td><td class="usercell">Команда «Стоп»</td><td class="usercell">Bool</td><td class="usercell">Выход</td></tr>
<tr class="userrow"><td class="usercell">stOpen</td><td class="usercell">Сотояние «Открыт»</td><td class="usercell">Bool</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">stClose</td><td class="usercell">Состояние «Закрыт»</td><td class="usercell">Bool</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">tCmd</td><td class="usercell">Command hold time (s)</td><td class="usercell">Целый</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">frq</td><td class="usercell">Период обсчёта (мс)</td><td class="usercell">Целый</td><td class="usercell">Вход</td></tr>
</tbody></table>
<a name="h91-8"></a><h2>6 Деление (div) &lt;526&gt;</h2>
<em>Описание:</em> Производит деление сборок переменных.<br>
<em>Формула:</em><br>
<!--notypo--><div class="code"><code><font color="#000000">
out = (in1_1*in1_2*in1_3*in1_4*in1_5 + in2_1*in2_2*in2_3*in2_4*in2_5 + in3) /<br>(in4_1*in4_2*in4_3*in4_4*in4_5 + in5_1*in5_2*in5_3*in5_4*in5_5 + in6);</font>
</code></div><!--/notypo--><br>
<a name="h91-9"></a><h2>7 Экспонента (exp) &lt;476&gt;</h2>
<em>Описание:</em> Вычисление экспоненты над&nbsp;группой переменных.<br>
<em>Формула:</em><br>
<!--notypo--><div class="code"><code><font color="#000000">
out=exp (in1_1*in1_2*in1_3*in1_4*in1_5 + (in2_1*in2_2*in2_3*in2_4*in2_5+in3) /<br>(in4_1*in4_2*in4_3*in4_4*in4_5+in</font>
</code></div><!--/notypo--><br>
<a name="h91-10"></a><h2>8 Расход (flow) &lt;235&gt;</h2>
<em>Описание:</em> Вычисление расхода газа.<br>
<em>Формула:</em><br>
<!--notypo--><div class="code"><code><font color="#000000">
f = K1*((K3+K4*x)^K2);</font>
</code></div><!--/notypo--><br>
<a name="h91-11"></a><h2>9 Итератор (increment) &lt;181&gt;</h2>
<em>Описание:</em> Итерационное вычисление с&nbsp;указанием приращения. Коэффициент приращения для&nbsp;разных направлений различный.<br>
<em>Формула:</em><br>
<!--notypo--><div class="code"><code><font color="#000000">
out = if( in1 &gt; in2 ) then in2 + in3*(in1-in2); <br>else in2 - in4*(in2-in1);</font>
</code></div><!--/notypo--><br>
<a name="h91-12"></a><h2>10 Задержка (lag) &lt;121&gt;</h2>
<em>Описание:</em> Задержка изменения переменной. Практически это&nbsp;фильтр без&nbsp;привязки ко&nbsp;времени.<br>
<em>Формула:</em><br>
<!--notypo--><div class="code"><code><font color="#000000">
y = y - Klag*( y - x );</font>
</code></div><!--/notypo--><br>
<a name="h91-13"></a><h2>11 Простое умножение(mult) &lt;259&gt;</h2>
<em>Описание:</em> Простое умножение с&nbsp;делением.<br>
<em>Формула:</em><br>
<!--notypo--><div class="code"><code><font color="#000000">
out=(in1_1*in1_2*in1_3*in1_4*in1_5*in1_6)/<br>(in2_1*in2_2*in2_3*in2_4);</font>
</code></div><!--/notypo--><br>
<a name="h91-14"></a><h2>12 Умножение+деление(multDiv) &lt;468&gt;</h2>
<em>Описание:</em> Разветвленное умножение+деление.<br>
<em>Формула:</em> <br>
<!--notypo--><div class="code"><code><font color="#000000">
out=in1_1*in1_2*in1_3*in1_4*in1_5*<br>(in2_1*in2_2*in2_3*in2_4*in2_5+(in3_1*in3_2*in3_3*in3_4*in3_5)/<br>(in4_1*in4_2*in4_3*in4_4*in4_5));</font>
</code></div><!--/notypo--><br>
<a name="h91-15"></a><h2>13 ПИД&nbsp;регулятор (pid) &lt;745&gt;</h2>
<em>Описание:</em> Пропорционально-интегрально-дифференциальный регулятор.<br>
<em>Параметры:</em><br>
<table class="usertable" border="1">
<tbody><tr class="userrow"><td class="usercell"><strong>ID</strong></td><td class="usercell"><strong>Параметр</strong></td><td class="usercell"><strong>Тип</strong></td><td class="usercell"><strong>Режим</strong></td></tr>
<tr class="userrow"><td class="usercell">var</td><td class="usercell">Переменная</td><td class="usercell">Веществен.</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">sp</td><td class="usercell">Задание</td><td class="usercell">Веществен.</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">max</td><td class="usercell">Макс. шкалы</td><td class="usercell">Веществен.</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">min</td><td class="usercell">Мин. шкалы</td><td class="usercell">Веществен.</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">out</td><td class="usercell">Выход (%)</td><td class="usercell">Веществен.</td><td class="usercell">Возврат</td></tr>
<tr class="userrow"><td class="usercell">auto</td><td class="usercell">Автомат</td><td class="usercell">Bool</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">casc</td><td class="usercell">Каскад</td><td class="usercell">Bool</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">Kp</td><td class="usercell">Kp</td><td class="usercell">Веществен.</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">Ti</td><td class="usercell">Ти (мс)</td><td class="usercell">Целый</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">Td</td><td class="usercell">Тд (мс)</td><td class="usercell">Целый</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">Tf</td><td class="usercell">Тфильтр (мс)</td><td class="usercell">Целый</td><td class="usercell">Вход</td></tr>	
<tr class="userrow"><td class="usercell">Hup</td><td class="usercell">Верхняя граница выхода (%)</td><td class="usercell">Веществен.</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">Hdwn</td><td class="usercell">Нижняя граница выхода (%)</td><td class="usercell">Веществен.</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">Zi</td><td class="usercell">Нечувствительность (%)</td><td class="usercell">Веществен.</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">K1</td><td class="usercell">Коэф. входа 1</td><td class="usercell">Веществен.</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">in1</td><td class="usercell">Вход 1</td><td class="usercell">Веществен.</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">K2</td><td class="usercell">Коэф. входа 2</td><td class="usercell">Веществен.</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">in2</td><td class="usercell">Вход 2</td><td class="usercell">Веществен.</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">K3</td><td class="usercell">Коэф. входа 3</td><td class="usercell">Веществен.</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">in3</td><td class="usercell">Вход 3</td><td class="usercell">Веществен.</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">K4</td><td class="usercell">Коэф. входа 4</td><td class="usercell">Веществен.</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">in4</td><td class="usercell">Вход 4</td><td class="usercell">Веществен.</td><td class="usercell">Вход</td></tr>
<tr class="userrow"><td class="usercell">cycle</td><td class="usercell">Цикл обсчёта (мс)</td><td class="usercell">Целый</td><td class="usercell">Вход</td></tr>
</tbody></table>
<em>Структура:</em><br>
<img src="about_ru_files/wakka.jpeg" alt="Структура PID-регулятора. (14&nbsp;Кб)" title="Структура PID-регулятора. (14&nbsp;Кб)" height="213" width="601"><br>
<a name="h91-16"></a><h2>14 Степень (pow) &lt;564&gt;</h2>
<em>Описание:</em> Возведение в&nbsp;степень.<br>
<em>Формула:</em> <br>
<!--notypo--><div class="code"><code><font color="#000000">
out=(in1_1*in1_2*in1_3*in1_4*in1_5)^<br>(in2_1*in2_2*in2_3*in2_4*in2_5 + (in3_1*in3_2*in3_3*in3_4*in3_5)/<br>(in4_1*in4_2*in4_3*in4_4*in4_5));</font>
</code></div><!--/notypo--><br>
<a name="h91-17"></a><h2>15 Выбор (select) &lt;156&gt;</h2>
<em>Описание:</em> Выбор одного из&nbsp;четырёх вариантов.<br>
<em>Формула:</em> <br>
<!--notypo--><div class="code"><code><font color="#000000">
out = if( sel = 1 ) then in1_1*in1_2*in1_3*in1_4;<br>if( sel = 2 ) then in2_1*in2_2*in2_3*in2_4;<br>if( sel = 3 ) then in3_1*in3_2*in3_3*in3_4;<br>if( sel = 4 ) then in4_1*in4_2*in4_3*in4_4;</font>
</code></div><!--/notypo--><br>
<a name="h91-18"></a><h2>16 Простой сумматор (sum) &lt;404&gt;</h2>
<em>Описание:</em> Простое суммирование с&nbsp;умножением.<br>
<em>Формула:</em> <br>
<!--notypo--><div class="code"><code><font color="#000000">
out=in1_1*in1_2+in2_1*in2_2+in3_1*in3_2+in4_1*in4_2<br>+ in5_1*in5_2+in6_1*in6_2+in7_1*in7_2+in8_1*in8_2;</font>
</code></div><!--/notypo--><br>
<a name="h91-19"></a><h2>17 Сумма с&nbsp;делением (sum_div) &lt;518&gt;</h2>
<em>Описание:</em> Cуммирование с&nbsp;делением группы значений.<br>
<em>Формула:</em><br>
<!--notypo--><div class="code"><code><font color="#000000">
out = in1_1*in1_2*(in1_3+in1_4/in1_5) + <br>in2_1*in2_2*(in2_3+in2_4/in2_5) +<br>in4_1*in4_2*(in4_3+in4_4/in4_5) + <br>in5_1*in5_2*(in5_3+in5_4/in5_5);</font>
</code></div><!--/notypo--><br>
<a name="h91-20"></a><h2>18 Сумма с&nbsp;умножением (sum_mult) &lt;483&gt;</h2>
<em>Описание:</em> Cуммирование с&nbsp;умножением группы значений.<br>
<em>Формула:</em><br>
<!--notypo--><div class="code"><code><font color="#000000">
out = in1_1*in1_2*(in1_3*in1_4+in1_5) + <br>in2_1*in2_2*(in2_3*in2_4+in2_5) +<br>in4_1*in4_2*(in4_3*in4_4+in4_5) + <br>in5_1*in5_2*(in5_3*in5_4+in5_5);</font>
</code></div><!--/notypo--><br></div>
</body></html>