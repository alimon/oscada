<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><title>OpenSCADAWiki : Doc/BlockCalc</title>



  
<meta name="robots" content="noindex, nofollow">
  <meta http-equiv="content-type" content="text/html; charset=windows-1251">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <link rel="stylesheet" type="text/css" href="about_ru_files/wakkaprint.css"></head><body>

<div class="header">
	<h1>
  OpenSCADAWiki : <a href="http://diyaorg.dp.ua/oscadawiki/wakka.php?wakka=TextSearch?phrase=Doc%2FBlockCalc">Doc/BlockCalc</a> 
	</h1>
</div>

<div class="pageBefore"><img src="about_ru_files/z.gif" alt="" style="display: block;" align="top" border="0" height="1" width="1"></div><div class="page">
<a name="h99-1"></a><h1>Модуль подсистемы “Контроллеры” &lt;BlockCalc&gt;</h1>
<br>
<table class="usertable" border="1">
<tbody><tr class="userrow"><td class="usercell"><em>Модуль:</em></td><td class="usercell">BlockCalc</td></tr>
<tr class="userrow"><td class="usercell"><em>Имя:</em></td><td class="usercell">Блочный вычислитель.</td></tr>
<tr class="userrow"><td class="usercell"><em>Тип:</em></td><td class="usercell">Специальные</td></tr>
<tr class="userrow"><td class="usercell"><em>Источник:</em></td><td class="usercell">cntr_BlockCalc.so</td></tr>
<tr class="userrow"><td class="usercell"><em>Версия:</em></td><td class="usercell">0.9.0</td></tr>
<tr class="userrow"><td class="usercell"><em>Автор:</em></td><td class="usercell">Роман Савоченко</td></tr>
<tr class="userrow"><td class="usercell"><em>Описание:</em></td><td class="usercell">Предоставляет блочный вычислитель.</td></tr>
<tr class="userrow"><td class="usercell"><em>Лицензия:</em></td><td class="usercell">GPL</td></tr>
</tbody></table>
<br>
<!--notypo--><fieldset><legend><strong> Оглавление документа   </strong></legend><div class="toc1"><a href="#h99-2">Введение</a></div><div class="toc1"><a href="#h99-3">1 Контроллер модуля</a></div><div class="toc1"><a href="#h99-4">2 Блочная схема контроллера</a></div><div class="toc1"><a href="#h99-5">3 Параметры контроллера</a></div></fieldset><!--/notypo--><br>
<a name="h99-2"></a><h2>Введение</h2>
Модуль подсистемы «Контроллеры» BlockCalc предоставляет в&nbsp;систему
OpenSCADA механизм создания пользовательских вычислений. Механизм
вычислений основывается на&nbsp;формальном языке блочных схем.<br>
<br>
Языки блочного программирования основываются на&nbsp;понятии блочных
схем. При&nbsp;чем, в&nbsp;зависимости от&nbsp;сущности блока, блочные
схемы могут быть: логическими схемами, схемами релейной логики, моделью
технологического процесса и&nbsp;другое. Суть блочной схемы состоит
в&nbsp;том, что&nbsp;она содержит список блоков и&nbsp;связи между ними.<br>
<br>
С&nbsp;формальной точки зрения, блок это&nbsp;элемент, который имеет
входы, выходы и&nbsp;алгоритм вычисления. Исходя из&nbsp;концепции
среды программирования, блок это&nbsp;кадр значений ассоциированный
с&nbsp;объектом функции.<br>
<br>
Разумеется, входы и&nbsp;выходы блоков нужно соединять
для&nbsp;получения цельной блочной схемы. Предусмотрены следующие типы
связей:<br>
<ul><li> межблочные, подключение входа одного блока к&nbsp;выходу другого, а&nbsp;также входа одного блока к&nbsp;входу другого;
</li><li> дальние межблочные, соединение блоков контроллеров данного модуля;
</li><li> коэффициенты, преобразование входа в&nbsp;константу,
все&nbsp;входы/выходы по&nbsp;умолчанию инициализируются
как&nbsp;константы;
</li><li> внешний атрибут параметра.</li></ul>
<br>Условно, соединения блоков можно изобразить как&nbsp;связи между
блоками в&nbsp;целом (рис. 1) или&nbsp;детализация связей (рис. 2).
В&nbsp;процессе связывания параметров блоков допустимо соединение
параметров любого типа. При&nbsp;этом, в&nbsp;процессе вычисления будет
выполняться автоматическое приведение типов.<br>
<br>
<div style="text-align: center;"><img src="about_ru_files/wakka_003.jpeg" alt="Общие связи между блоками блочной схемы (15&nbsp;Кб)" title="Общие связи между блоками блочной схемы (15&nbsp;Кб)" height="212" width="601"><br>
Рис.&nbsp;1. Общие связи между блоками блочной схемы</div><br>
<br>
<div style="text-align: center;"><img src="about_ru_files/wakka_002.jpeg" alt="Детализированные связей между блоками (14&nbsp;Кб)" title="Детализированные связей между блоками (14&nbsp;Кб)" height="162" width="599"><br>
Рис.&nbsp;2. Детализированные связи между блоками</div><br>
<a name="h99-3"></a><h2>1 Контроллер модуля</h2>
Каждый контроллер этого модуля содержит блочную схему, которую
он&nbsp;обсчитывает с&nbsp;указанным периодом. Для&nbsp;предоставления
вычисленных данных в&nbsp;систему OpenSCADA, в&nbsp;контроллере могут
создаваться параметры. Пример вкладки конфигурации контроллера данного
типа изображен на&nbsp;рис.3.<br>
<br>
<div style="text-align: center;"><img src="about_ru_files/wakka_006.jpeg" alt="Форма конфигурации контроллера. (105&nbsp;Кб)" title="Форма конфигурации контроллера. (105&nbsp;Кб)" height="864" width="816"><br>
Рис.&nbsp;3. Вкладка конфигурации контроллера.</div><br>
<br>
С&nbsp;помощью этой вкладки можно установить:<br>
<ul><li> Состояние контроллера, а&nbsp;именно: «Включен», «Запущен» и&nbsp;имя БД&nbsp;содержащей конфигурацию.
</li><li> Идентификатор, имя&nbsp;и&nbsp;описание контроллера(платы).
</li><li> Состояние в&nbsp;которое переводить контроллер при&nbsp;загрузке: «Включен» и&nbsp;«Запущен».
</li><li> Имена таблиц для&nbsp;хранения параметров и&nbsp;блоков контроллера.
</li><li> Период, приоритет и&nbsp;число итераций в&nbsp;одном цикле задачи вычисления блочной схемы контроллера.
</li><li> Период автоматической синхронизации блоков с&nbsp;БД.
</li><li> Сохранить/загрузить контроллер в&nbsp;БД.</li></ul>
<a name="h99-4"></a><h2>2 Блочная схема контроллера</h2>
Блочная схема формируется посредством вкладки блоков контроллера (Рис.4), конфигурации блока (Рис.5) и&nbsp;его связей (Рис.6).<br>
<br>
Блоки блочной схемы могут связываться как&nbsp;между собой
так&nbsp;и&nbsp;подключаться к&nbsp;атрибутам параметров. Сами блоки,
при&nbsp;этом, не&nbsp;содержат структуры входов/выходов(IO),
а&nbsp;содержат значения исходя из&nbsp;структуры IO&nbsp;связанной
функции. Функции для&nbsp;связывания с&nbsp;блоком используются
из&nbsp;объектной модели системы OpenSCADA.<br>
<br>
Любой блок может, в&nbsp;любой момент, быть исключён из&nbsp;обработки
и&nbsp;переконфигурирован, после чего может быть опять включен
в&nbsp;обработку. Связи между блоками могут конфигурироваться
без&nbsp;исключения блоков из&nbsp;обработки и&nbsp;остановки
контроллера. Значения всех IO&nbsp;не охваченных связями могут быть
изменены в&nbsp;процессе обработки.<br>
<br>
Любой блок можно копировать для&nbsp;ускорения процесса формирования блочной схемы (Рис.4).<br>
<br>
<div style="text-align: center;"><img src="about_ru_files/wakka_008.jpeg" alt="Вкладка блоков контроллера. Блочная схема. (83&nbsp;Кб)" title="Вкладка блоков контроллера. Блочная схема. (83&nbsp;Кб)" height="650" width="671"><br>
Рис.&nbsp;4. Вкладка блоков контроллера. Блочная схема.</div><br>
<br>
С&nbsp;помощью вкладки блоков можно:<br>
<ul><li> Контролировать время вычисления блочной схемы.
</li><li> Добавить/удалить блок в&nbsp;блочную схему.
</li><li> Скопировать блок блочной схемы.</li></ul>
<br>
<div style="text-align: center;"><img src="about_ru_files/wakka_007.jpeg" alt="Форма конфигурации блока блочной схемы. (80&nbsp;Кб)" title="Форма конфигурации блока блочной схемы. (80&nbsp;Кб)" height="718" width="752"><br>
Рис.&nbsp;5. Вкладка конфигурации блока блочной схемы.</div><br>
<br>
С&nbsp;помощью формы конфигурации блока можно установить:<br>
<ul><li> Состояние контроллера, а&nbsp;именно: «Включен» и&nbsp;«Обрабатывается».
</li><li> Идентификатор, имя&nbsp;и&nbsp;описание блока.
</li><li> Состояние в&nbsp;которое переводить блок при&nbsp;загрузке: «Включен» и&nbsp;«Запущен».
</li><li> Назначить рабочую функцию из&nbsp;объектной модели. Перейти к&nbsp;функции для&nbsp;ознакомления.
</li><li> Сохранить/загрузить блок в&nbsp;БД.</li></ul>
<br>
<div style="text-align: center;"><img src="about_ru_files/wakka_005.jpeg" alt="Форма конфигурации связей блока блочной схемы. (107&nbsp;Кб)" title="Форма конфигурации связей блока блочной схемы. (107&nbsp;Кб)" height="719" width="754"><br>
Рис.&nbsp;6. Вкладка конфигурации связей блока блочной схемы.</div><br>
<br>
С&nbsp;помощью вкладки конфигурации связей блока блочной схемы можно установить связи для&nbsp;каждого параметра блока отдельно.<br>
<br>
Поддерживаются следующие типы связей:<br>
<ul><li> Межблочные. Подключение входа блока к&nbsp;выходу другого блока, а&nbsp;также входа одного блока к&nbsp;входу другого.
</li><li> Дальние межблочные. Соединение блоков из&nbsp;различных контроллеров данного модуля.
</li><li> Коэффициент. Превращение входа в&nbsp;константу. Все&nbsp;входы/выходы по&nbsp;умолчанию инициализируются как&nbsp;константы.
</li><li> Внешний атрибут параметра.</li></ul>
<br>
Для&nbsp;установки значений параметров блока предназначена соответствующая вкладка (Рис.7).<br>
<br>
В&nbsp;соответствии с&nbsp;реализацией пользовательских функций
в&nbsp;системе OpenSCADA поддерживаются четыре основных типа IO: целое,
вещественное, логическое и&nbsp;строка.<br>
<br>
<div style="text-align: center;"><img src="about_ru_files/wakka.jpeg" alt="Форма конфигурации значений параметров блока блочной схемы. (96&nbsp;Кб)" title="Форма конфигурации значений параметров блока блочной схемы. (96&nbsp;Кб)" height="719" width="754"><br>
Рис.&nbsp;7. Вкладка конфигурации значений параметров блока блочной схемы.</div><br>
<a name="h99-5"></a><h2>3 Параметры контроллера</h2>
Модуль предоставляет только один тип&nbsp;параметров “Стандартный”.
Параметр служит для&nbsp;отражения вычисленных в&nbsp;блоках данных
на&nbsp;атрибуты параметров контроллера. Пример вкладки конфигурации
параметра приведен на&nbsp;Рис.8.<br>
<br>
<div style="text-align: center;"><img src="about_ru_files/wakka_004.jpeg" alt="Форма конфигурации значений параметров контроллера. (71&nbsp;Кб)" title="Форма конфигурации значений параметров контроллера. (71&nbsp;Кб)" height="698" width="761"><br>
Рис.&nbsp;8. Вкладка конфигурации значений параметров контроллера.</div><br>
<br>
С&nbsp;помощью этой вкладки можно установить:<br>
<ul><li> Состояние параметра, а&nbsp;именно: «Включен» и&nbsp;тип параметра.
</li><li> Идентификатор, имя&nbsp;и&nbsp;описание параметра.
</li><li> Состояние в&nbsp;которое переводить параметр при&nbsp;загрузке: «Включен».
</li><li> Блок и&nbsp;перечень его&nbsp;параметров для&nbsp;отражение на&nbsp;атрибут параметра контроллера.
</li><li> Сохранить/загрузить параметр в&nbsp;БД.</li></ul></div>
</body></html>