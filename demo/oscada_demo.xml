<?xml version="1.0" encoding="UTF-8" ?>
<OpenSCADA>
    <!--
    This is the OpenSCADA configuration file.
    -->
    <station id="DemoStation" name="Demo station">
	<!--
	Discribe internal parameter for station.
	Station this only OpenSCADA programm.
	-->
	<prm id="SYSOptCfg">1</prm>
	<prm id="Workdir">/var/spool/openscada</prm>
	<prm id="LogTarget">10</prm>
	<prm id="MessLev">0</prm>
	<prm id="WorkDB">SQLite.GenDB</prm>

	<node id="sub_BD">
            <tbl id="DB">
                <fld ID="GenDB" TYPE="SQLite" NAME="Generic DB" ADDR="./DATA/DemoSt.db;UTF8"/>
            </tbl>
        </node>

	<node id="sub_Security">
            <!--
            <tbl id="User">
        	<fld
		    NAME="root"
		    DESCR="Super user"
		    ID="0"
		    PASS="openscada"
		    GRP="root"/>
		<fld
		    NAME="user"
		    DESCR="System user"
		    ID="1"
		    PASS=""
		    GRP="root"/>
	    </tbl>
	    <tbl id="Grp">
		<fld
		    NAME="root"
		    DESCR="Super users groups."
		    ID="0"
		    USERS=""/>
            </tbl>-->
	</node>

	<node id="sub_ModSched">
	    <prm id="ModPath">/usr/lib/openscada</prm>
	    <prm id="ModAuto">*</prm>
	    <prm id="ChkPer">0</prm>
	</node>

	<node id="sub_Transport">
	    <!--
            <tbl id="In">
        	<fld
		    ID="WEB_1"
		    DESCRIPT="Generic transport for WEB interface."
		    MODULE="Sockets"
		    ADDR="TCP::10002:0"
		    PROT="HTTP"
		    START="1"
		    SocketsBufLen="5"
		    SocketsMaxQueue="10"
		    SocketsMaxClient="10"/>
		<fld
		    ID="WEB_2"
		    DESCRIPT="Reserve transport for WEB interface."
		    MODULE="Sockets"
		    ADDR="TCP::10004:0"
		    PROT="HTTP"
		    START="1"
		    SocketsBufLen="5"
		    SocketsMaxQueue="10"
		    SocketsMaxClient="10"/>
	    </tbl>
	    <tbl id="Out">
	        <fld
		    ID="WEB_test"
		    NAME="WEB test"
		    DESCRIPT="WEB output test"
		    MODULE="Sockets"
		    ADDR="TCP:127.0.0.1:10002"
		    START="1"/>
            </tbl>-->
	</node>

	<node id="sub_Params">
	    <!--
	    <tbl id="Prm">
		<fld SHIFR="KSH6open" NAME="KSH6 Open" DESCR="" EN="1" MODE="2" PRM="dsignal"/>
	    </tbl>
	    <tbl id="PrmIO">
		<fld PRM_ID="KSH6open" ID="in" VALUE="DAQ.BlockCalc.Anast1to2node.КШ6.st_open"/>
	    </tbl>
	    <tbl id="Tmpl">
		<fld ID="dsignal" NAME="Digit signal" DESCR="" FUNC="DAQ.JavaLikeCalc.lib_TemplFunc.d_alarm"/>
	    </tbl>
	    <tbl id="TmplIO">
		<fld TMPL_ID="dsignal" ID="in" ATTR_MODE="1" ACCS_MODE="2" VALUE=""/>
		<fld TMPL_ID="dsignal" ID="alrm_mess" ATTR_MODE="2" ACCS_MODE="0" VALUE="Error"/>
		<fld TMPL_ID="dsignal" ID="alrm_md" ATTR_MODE="2" ACCS_MODE="0" VALUE=""/>
		<fld TMPL_ID="dsignal" ID="alrm" ATTR_MODE="1" ACCS_MODE="0" VALUE=""/>
	    </tbl>-->
	</node>

	<node id="sub_DAQ">
	    <node id="mod_OperationSystem">
		<!--
		<tbl id="DAQ">
		    <fld
			ID="DataOS"
			NAME="Data OS"
			DESCR="Data of services and subsystems OS."
			ENABLE="1"
			START="1"
			AUTO_FILL="0"
			PRM_BD="DataOSprm"
			PERIOD="1000"
			PRIOR="0"/>
		</tbl>
		<tbl id="DataOSprm">
		    <fld SHIFR="CPU" NAME="CPU load" DESCR="" EN="1" TYPE="CPU" SUBT="gen"/>
		    <fld SHIFR="MEM" NAME="Memory" DESCR="" EN="1" TYPE="MEM"/>
		</tbl>
                -->
	    </node>

	    <node id="mod_DiamondBoards">
	        <!--
		<tbl id="DAQ">
		    <fld ID="Athena" NAME="Athena board" DESCR="" ENABLE="1" START="0"
		        BOARD="25" PRM_BD_A="AthenaAnPrm" PRM_BD_D="AthenaDigPrm" ADDR="640" INT="5"
			DIO_CFG="0" ADMODE="0" ADRANGE="0" ADPOLAR="0" ADGAIN="0" ADCONVRATE="1000"/>
		</tbl>
		<tbl id="AthenaAnPrm">
		    <fld SHIFR="ai0" NAME="AI 0" DESCR="" EN="0" TYPE="0" CNL="0" GAIN="0"/>
		</tbl>
		<tbl id="AthenaDigPrm">
		    <fld SHIFR="di0" NAME="DI 0" DESCR="" EN="0" TYPE="0" PORT="0" CNL="0"/>
		</tbl>
		-->
	    </node>

	    <node id="mod_BlockCalc">
		<!--
		<tbl id="DAQ">
		    <fld ID="Model" NAME="Model" DESCR="" ENABLE="1" START="1" PRM_BD="Model_prm" BLOCK_SH="Model_blcks"
			PERIOD="1000" PRIOR="0" PER_DB="0" ITER="1"/>
		</tbl>
		<tbl id="Model_blcks">
		    <fld ID="Klap" NAME="Klapan" DESCR="" FUNC="DAQ.JavaLikeCalc.lib_techApp.klap" EN="1" PROC="1"/>
		</tbl>
		<tbl id="Model_blcks_io">
		    <fld BLK_ID="Klap" ID="l_kl1" TLNK="0" LNK="" VAL="50"/>
		    <fld BLK_ID="Klap" ID="l_kl2" TLNK="0" LNK="" VAL="20"/>
		</tbl>
		<tbl id="Model_prm">
		    <fld SHIFR="l_kl" NAME="Klap lev" DESCR="" EN="1" BLK="Klap" IO="l_kl1"/>
		</tbl>
		-->
	    </node>

	    <node id="mod_JavaLikeCalc">
		<!--
		<tbl id="DAQ">
		    <fld ID="CalcTest" NAME="Calc Test" DESCR="" ENABLE="1" START="1" PRM_BD="CalcTest_prm"
			FUNC="TemplFunc.d_alarm" PERIOD="1000" PRIOR="0" PER_DB="0" ITER="1"/>
		</tbl>
		<tbl id="CalcTest_val">
		    <fld ID="in" VAL="0"/>
		    <fld ID="alrm" VAL=""/>
		    <fld ID="alrm_md" VAL="1"/>
		    <fld ID="alrm_mess" VAL="Error present."/>
		</tbl>
		<tbl id="CalcTest_prm">
		    <fld SHIFR="alrm" NAME="Alarm" DESCR="" EN="1" FLD="alrm"/>
		</tbl>
		<tbl id="lib">
		    <fld ID="TemplFunc" NAME="" DESCR="" DB="lib_TemplFunc"/>
		</tbl>
		<tbl id="lib_TemplFunc">
		    <fld ID="d_alarm" NAME="Digit alarm" DESCR="" FORMULA="alrm=(in==alrm_md)?&quot;1:&quot;+alrm_mess:&quot;0&quot;;"/>
		</tbl>
		<tbl id="lib_TemplFunc_io">
		    <fld F_ID="d_alarm" ID="in" NAME="Input" TYPE="3" MODE="0" DEF="" HIDE="0" POS="0"/>
		    <fld F_ID="d_alarm" ID="alrm" NAME="Alarm" TYPE="0" MODE="1" DEF="" HIDE="0" POS="1"/>
		    <fld F_ID="d_alarm" ID="alrm_md" NAME="Alarm mode" TYPE="3" MODE="0" DEF="" HIDE="0" POS="2"/>
		    <fld F_ID="d_alarm" ID="alrm_mess" NAME="Alarm message" TYPE="0" MODE="0" DEF="" HIDE="0" POS="3"/>
		</tbl>-->
	    </node> 

	</node>

	<node id="sub_Archive">
	    <prm id="MessBufSize">1000</prm>
	    <prm id="MessPeriod">5</prm>
	    <prm id="ValPeriod">1000</prm>
	    <prm id="ValPriority">10</prm>
	    <!--
	    <tbl id="MessProc">
		<fld
		    ID="StatErrors"
		    NAME="Errors state"
		    DESCR="Local errors archive"
		    MODUL="BaseArh"
		    START="1"
		    CATEG="/DemoStation*"
		    LEVEL="4"
		    ADDR="ARCHIVES/MESS/stError/"
		    BaseArhMSize="300"
		    BaseArhNFiles="10"
		    BaseArhTmSize="30"
		    BaseArhXML="1"
		    BaseArhPackTm="10"
		    BaseArhTm="60"/>
		<fld
		    ID="NetRequsts"
		    DESCR="Requests to servet throw transport the Sockets."
		    MODUL="BaseArh"
		    START="1"
		    CATEG="/DemoStation/Transport/Sockets*"
		    LEVEL="1"
		    ADDR="ARCHIVES/MESS/Net/"
		    BaseArhMSize="300"
		    BaseArhNFiles="10"
		    BaseArhTmSize="30"
		    BaseArhXML="1"
		    BaseArhPackTm="10"
		    BaseArhTm="60"/>
	    </tbl>
	    <tbl id="ValProc">
	        <fld
		    ID="1h"
		    NAME="1hour"
		    MODUL="BaseArh"
		    DESCR="Hour average"
		    START="1"
		    ADDR="ARCHIVES/VAL/1h/"
		    V_PER="360"
		    A_PER="60"
		    BaseArhTmSize="8640"
		    BaseArhNFiles="10"
		    BaseArhRound="0.1"
		    BaseArhPackTm="10"
		    BaseArhTm="60"/>
	    </tbl>
	    <tbl id="ValArchive">
	        <fld
	    	    ID="test1"
		    NAME="Test 1"
		    DESCR="Test 1"
		    START="1"
		    VTYPE="1"
		    BPER="1"
		    BSIZE="200"
		    BHGRD="1"
		    BHRES="0"
		    SrcMode="0"
		    Source=""
		    ArchS=""/>
	    </tbl>-->
	</node>

	<node id="sub_Protocol">
	</node>

	<node id="sub_UI">
	    <node id="mod_QTStarter">
		<prm id="StartMod">QTCfg</prm>
	    </node>
	    <node id="mod_WebCfg">
		<prm id="SessTimeLife">20</prm>
	    </node>
	</node>

	<node id="sub_Special">
    	    <node id="mod_SystemTests">
		<prm id="PARAM" on="0" per="5" name="DAQ.OperationSystem.AutoDA.CPULoad"/>
		<prm id="XML" on="0" per="10" file="../../etc/oscada_demo.xml"/>
		<prm id="MESS" on="0" per="10" t_arh="BaseArh" arh="StatErrors" categ=""/>
		<prm id="SOAttDet" on="0" per="20" name="../../lib/openscada/ui_Vision.so" full="1"/>
		<prm id="Val" on="0" per="1" name="Params.КШ6open.alrm" arch_len="5" arch_per="1000000"/>
		<prm id="Val" on="0" per="1" name="DAQ.OperationSystem.AutoDA.CPULoad.load" arch_len="10" arch_per="1000000"/>
		<prm id="BD" on="0" per="10" type="MySQL" bd="server.diya.org;roman;123456;oscadaTest;;;KOI8-U" table="test" size="1000"/>
		<prm id="BD" on="0" per="10" type="DBF" bd="./DATA/DBF" table="test.dbf" size="1000"/>
		<prm id="BD" on="0" per="10" type="SQLite" bd="./DATA/test.db" table="test" size="1000"/>
		<prm id="TrOut" on="0" per="1" addr="TCP:127.0.0.1:10001" type="Sockets" req="time"/>
		<prm id="TrOut" on="0" per="1" addr="UDP:127.0.0.1:10001" type="Sockets" req="time"/>
		<prm id="TrOut" on="0" per="1" addr="UNIX:./oscada" type="Sockets" req="time"/>
		<prm id="TrOut" on="0" per="1" addr="UDP:127.0.0.1:daytime" type="Sockets" req="time"/>
		<prm id="Func" on="0" per="10"/>
		<prm id="SysContrLang" on="0" per="10" path="/Archive/BaseArh/mess_StatErrors/%2fprm%2fst"/>
		<prm id="ValBuf" on="0" per="5"/>
		<prm id="Archive" on="0" per="30" arch="test1" period="1000000"/>
		<prm id="Base64Code" on="0" per="10"/>
    	    </node>
	</node>
  </station>

</OpenSCADA>

